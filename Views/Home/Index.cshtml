@{
    ViewData["Title"] = "Home Page";
    Layout = "_Layout";
}

<body>
    <div class="container disable">
        <h2>Image Editor</h2>
        <div class="wrapper">
            <div class="editor-panel">
                <div class="filter">
                    <label class="title">Filters</label>
                    <div class="options">
                        <button id="brightness" class="active">Brightness</button>
                        <button id="saturation">Saturation</button>
                        <button id="inversion">Inversion</button>
                        <button id="grayscale">Grayscale</button>
                    </div>
                    <div class="slider">
                        <div class="filter-info">
                            <p class="name">Brighteness</p>
                            <p class="value">100%</p>
                        </div>
                        <input type="range" value="100" min="0" max="200">
                    </div>
                </div>
                <div class="rotate">
                    <label class="title">Rotate & Flip</label>
                    <div class="options">
                        <button id="left"><i class="fa-solid fa-rotate-left"></i></button>
                        <button id="right"><i class="fa-solid fa-rotate-right"></i></button>
                        <button id="horizontal"><i class='bx bx-reflect-vertical'></i></button>
                        <button id="vertical"><i class='bx bx-reflect-horizontal'></i></button>
                    </div>
                </div>
            </div>
            <div class="preview-img">
                <img src="~/img/image-placeholder.jpg" alt="preview-img">
            </div>
        </div>
        <div class="controls">
            <button class="reset-filter" style="color: #6C757D; border: 1px solid #6C757D;">
                Reset Filters
            </button>
            <div>
                <input type="file" class="file-input" accept="image/*" hidden>
                <button class="choose-img" style="background: #6C757D; border: 1px solid #6C757D;">
                    Choose Image
                </button>
                <button type="submit" class="save-img btn btn-primary" style="margin-left: 5px;">
                    Save Image
                </button>
            </div>
        </div>
    </div>

    <!-- Thêm overlay loading -->
    <div class="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
        <div class="loading-text">Đang lưu ảnh...</div>
    </div>

    <!-- Modal hiển thị danh sách ảnh -->
    <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="imageModalLabel">Chọn ảnh</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <!-- Ảnh từ máy -->
                        <div class="col-md-6">
                            <h6>Chọn ảnh từ máy</h6>
                            <input type="file" class="form-control" id="localImageInput" accept="image/*">
                        </div>
                        <!-- Ảnh đã lưu -->
                        <div class="col-md-6">
                            <h6>Ảnh đã lưu</h6>
                            <div class="row" id="savedImages">
                                <!-- Ảnh sẽ được thêm vào đây bằng JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            console.log('DOM fully loaded');
            // Load script.js
            var script = document.createElement('script');
            script.src = '/js/script.js';
            script.onload = function () {
                console.log('script.js loaded successfully');
            };
            script.onerror = function () {
                console.error('Error loading script.js');
            };
            document.body.appendChild(script);
        });
    </script>
</body>
